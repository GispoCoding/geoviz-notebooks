services:
  flask:
    image: tiangolo/uwsgi-nginx-flask:python3.8
    container_name: flask
    ports:
      - 80:80
    volumes:
      - ./server/:/app
      - ./notebooks/:/app/notebooks
  # swag:
  #   image: ghcr.io/linuxserver/swag
  #   container_name: swag
  #   cap_add:
  #     - NET_ADMIN
  #   environment:
  #     - PUID=1000
  #     - PGID=1000
  #     - TZ=Europe/Helsinki
  #     - URL=gispocoding.fi
  #     - SUBDOMAINS=geoviz,
  #     - VALIDATION=dns
  #     # - CERTPROVIDER= #optional
  #     - DNSPLUGIN=route53
  #     # - DUCKDNSTOKEN=<token> #optional
  #     # - EMAIL=<e-mail> #optional
  #     # - ONLY_SUBDOMAINS=false #optional
  #     # - EXTRA_DOMAINS=<extradomains> #optional
  #     # - STAGING=false #optional
  #   volumes:
  #     - ./server/swag/:/config
  #   ports:
  #     - 443:443
  #     # - 80:80 #optional
  #   restart: unless-stopped
  notebook:
    image: gispo/geoviz-notebooks
    container_name: notebook
    volumes:
      - .:/home/jovyan/geoviz
      - pgdata:/var/lib/postgresql/data
    ports:
      - 8888:8888